doctype 5
html(itemscope, itemtype="http://schema.org/Product")
	head
		title Eagull

		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1">

		<meta name="keywords" content="chatroom firemoth eagull eagle seagull gull fire moth group chat trollmoth chaosmoth groupchat">
		<meta name="description" content="A chatroom based community, where friends and strangers can coexist!">
		<meta name="copyright" content="&copy; 2011 Eagull">
		<meta itemprop="name" content="Eagull">
		<meta itemprop="description" content="A chatroom based community, where friends and strangers can coexist!">
		<meta itemprop="url" content="http://www.eagull.net/">
		<meta itemprop="image" content="http://www.eagull.net/logo.png">
		<meta itemprop="author" content="http://plus.google.com/102352740383917776245">
		<meta property="og:title" content="Eagull" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="http://www.eagull.net/" />
		<meta property="og:image" content="http://www.eagull.net/logo.png" />
		<meta property="og:site_name" content="Eagull" />
		<meta property="fb:app_id" content="216540884750"/>

		link(rel='icon', type='image/x-icon', href="/favicon.ico")
		link(href='http://fonts.googleapis.com/css?family=Architects+Daughter&text=EAGULL', rel='stylesheet', type='text/css')
		link(href='http://fonts.googleapis.com/css?family=Ubuntu:300', rel='stylesheet', type='text/css')
		link(href='http://fonts.googleapis.com/css?family=Happy+Monkey', rel='stylesheet', type='text/css')

		link(href='/lib/bootstrap.css', rel='stylesheet', type='text/css')
		!=css('global.css')

		script window.blaze = { version: "#{version}", debug: (location.hostname.indexOf('eagull.net') == -1) }; if(blaze.debug) blaze.version += "-dev";
		script _gaq = window._gaq || []; _gaq.push(['_setAccount', blaze.debug ? 'UA-21159963-7' : 'UA-21159963-8'], ['_trackPageview']);
		script(src="/lib/jquery.min.js")
		script(src="/lib/jquery-ui.min.js")
		script(src="/lib/underscore.js")
		script(src="/lib/backbone.js")

		!=js("xmpp.js")
		!=js("blaze.js")
		!=js("track.js")
		!=js("messages.js")
		!=js("mvc.js")
		!=js("home.js")
		!=js("roster.js")
		!=js("index.js")

	body
		.navbar.navbar-inverse.navbar-fixed-top
			.navbar-inner
				.container-fluid
					a.brand.hidden-phone(href='/') EAGULL
					ul.nav
						li
							a(href='/room/firemoth@chat.eagull.net') FireMoth
						li
							a(href='/room/chaosmoth@chat.eagull.net') ChaosMoth
						li
							a.btnLightTemplate(x-template='frmJoinRoom') +
					ul.hidden-phone.nav.pull-right
						li.dropdown
							a.dropdown-toggle(data-toggle="dropdown") options
								b.caret
							ul.dropdown-menu
								li
									a.toggleNotifications enable notifications
								li
									a.changeNickname change nickname
						li
							a.messageView.btnRoomContent(x-type='roster') current users
						li
							a(href='/usage') usage guide

		#nav-spacer.visible-desktop

		.contentView.container-fluid
			.row-fluid
				.span12#content !{content}

		.messageView.container-fluid
			.row-fluid.hidden-phone#topicContainer(style="display:none")
				.span12
					pre
						h4#topic
			.row-fluid
				.span12.scrollPanel#leftPanel
					#messages
				.span4.scrollPanel#rightPanel(style="display:none")
					button.btn.btn-mini.btn-inverse#btnCollapseContent x
					#contentPanel
						#roster

			#messageTypingBar(style='display:none')
				input#messageBox(placeholder="Type a message here.")
				button#btnSend.btn.btn-large.btn-primary Send

		#templates(style='display:none')
			form#frmXmppConfig
				label(for='txtXmppId') Username
					input#txtXmppId.input-text.persistent(placeholder='user@example.com')
				label(for='txtXmppPasswd') Password
					input#txtXmppPasswd.input-text.persistent(type='password')
				button.btnCloseLightbox#btnSaveXmppConfig.nice.small.green.button.right Connect

			form#frmNickname
				label Nickname
				input.input-xlarge.persistent#txtNickname(type='text', required='required', maxlength=20, pattern="^ *[A-Za-z0-9]+ *$", placeholder="English letter and numbers only!")
				.btnGroup
					button.btn.btn-primary.btnSaveNickname Save

			form#frmJoinRoom
				h2 Join a chatroom
				label Invitation Code
					input.input-text
				button.big.nice.green.button Join

			form#frmCreateRoom
				label Name
					input.input-text

			#tplMessage
				| <
				span.nick
				| >
				span.message
				time.timestamp.hidden-phone

			#tplAction
				| * 
				span.nick
				span.message
				time.timestamp.hidden-phone

			#tplPrivateMessage
				| [
				span.nickFrom
				|  -> 
				span.nickTo
				| ]
				span.message
				time.timestamp.hidden-phone

		script(src="/lib/jquery.timeago.js")
		script(src="/lib/strophe.min.js")
		script(src="/lib/strophe.muc.min.js")
		script(src="http://www.google-analytics.com/ga.js")
		script(src="/fancybox/jquery.fancybox.pack.js")
		script(src="/lib/bootstrap.js")
		link(rel="stylesheet", href="/fancybox/jquery.fancybox.css")

